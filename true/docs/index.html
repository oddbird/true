

<!DOCTYPE html>
<html lang="en" data-herman="root">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <title>True Documentation</title>

  <link href="assets/img/favicon.ico" rel="shortcut icon">
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,600|Source+Sans+3:400,400i,700,700i" rel="stylesheet">

  <link rel="stylesheet" href="assets/webpack/app_styles.min.css" />

  

  
</head>
<body data-herman="body">
  <svg xmlns="http://www.w3.org/2000/svg" hidden>
  <symbol id="icon-logo" viewBox="0 0 16 16">
    <path d="M.2 8 0 7.8v-.2C.8 6.9 1.9 5.9 2.7 5l.4.3c-.5.8-1.1 1.6-1.8 2.3 1 1.2 1 1.3 1.7 2.4l-.4.3c-.4-.4-.5-.6-1-1C1 8.6 1.1 8.7.2 8M13 10c.6-1.1.7-1.1 1.7-2.4-.6-.6-1.3-1.5-1.7-2.3l.3-.3c.8.8 1.8 1.8 2.7 2.6v.2l-.8.7c-.3.3-1.2 1.1-1.8 1.7z"/><path d="M2.6 13.1H3c.9 0 1.1-.2 1.1-1.4V4.2c0-1.1-.2-1.4-1.1-1.4h-.4v-.6h4.5v.7h-.3c-.9 0-1.1.2-1.1 1.4v3.2h4.6V4.2c0-1.1-.2-1.4-1.1-1.4h-.3v-.6h4.5v.7H13c-.9 0-1.1.2-1.1 1.4v7.5c0 1.1.2 1.4 1.1 1.4h.4v.7H8.9v-.7h.3c.9 0 1.1-.2 1.1-1.4V8.2H5.7v3.5c0 1.1.2 1.4 1.1 1.4h.3v.7H2.6z"/>
  </symbol>
  <symbol id="icon-menu" viewBox="0 0 24 28">
    <path d="M24 21v2c0 .547-.453 1-1 1H1c-.547 0-1-.453-1-1v-2c0-.547.453-1 1-1h22c.547 0 1 .453 1 1m0-8v2c0 .547-.453 1-1 1H1c-.547 0-1-.453-1-1v-2c0-.547.453-1 1-1h22c.547 0 1 .453 1 1m0-8v2c0 .547-.453 1-1 1H1c-.547 0-1-.453-1-1V5c0-.547.453-1 1-1h22c.547 0 1 .453 1 1"/>
  </symbol>
</svg>

  <div data-region="app">
    <header data-region="banner">
      
  <button data-nav-toggle data-toggle="button" aria-controls="nav" aria-pressed="false" type="button" data-toggle-synced="false">
    
  <svg data-icon="menu" data-icon-size="nav-icon" ><title>menu</title><use xlink:href="#icon-menu" />
  </svg>

  </button>


      <div class="project-title">
        <a href="index.html" rel="home" class="project-name">True</a>
        
          <span class="project-version">9.0.0</span>
        
      </div>
    </header>

    <div data-region="container">
      
  <nav data-region="nav" data-toggle="target" id="nav" data-target-id="nav" aria-expanded="false" data-auto-closing="false" data-auto-closing-on-any-click="false">
    <form action="search.html">
      <input type="text" name="q" placeholder="Search…" required minlength="3">
    </form>

    <div class="nav-subsection">
      <h3 class="nav-home">
        
        <a href="index.html" data-nav="is-active">True</a>
      </h3>

      
      
        <ul>
          
            
            <li class="nav-item">
              <a href="CHANGELOG.html" data-nav="is-not-active">Changelog</a>
            </li>
          
            
            <li class="nav-item">
              <a href="CONTRIBUTING.html" data-nav="is-not-active">Contributing</a>
            </li>
          
            
            <li class="nav-item">
              <a href="LICENSE.html" data-nav="is-not-active">BSD3 License</a>
            </li>
          
        </ul>
      
    </div>

    
    <div class="nav-subsection">
      <ul>
            <li class="nav-subsection">
              <h3 class="nav-title">Structure</h3>
              <ul>
                
  
    <li class="nav-item">
      <a href="api-settings.html" data-nav="is-not-active">Optional Configuration</a>
    </li>
  
  
    <li class="nav-item">
      <a href="api-test.html" data-nav="is-not-active">Describing Tests</a>
    </li>
  
  
    <li class="nav-item">
      <a href="api-report.html" data-nav="is-not-active">Reporting Results</a>
    </li>
  </ul>
            </li>
            <li class="nav-subsection">
              <h3 class="nav-title">Assertions</h3>
              <ul>
                
  
    <li class="nav-item">
      <a href="api-assert-values.html" data-nav="is-not-active">Testing Return<span class="widont">&nbsp;</span>Values</a>
    </li>
  
  
    <li class="nav-item">
      <a href="api-assert-output.html" data-nav="is-not-active">Testing CSS<span class="widont">&nbsp;</span>Output</a>
    </li>
  
  
    <li class="nav-item">
      <a href="api-errors.html" data-nav="is-not-active">Catching &amp; Testing<span class="widont">&nbsp;</span>Errors</a>
    </li>
  </ul>
            </li></ul>
    </div>

    
    

    
      <aside class="footer-credit">
        <a href="https://www.oddbird.net/herman/" class="footer-icon">
          
  <svg data-icon="logo" data-icon-size="footer-logo" ><use xlink:href="#icon-logo" />
  </svg>

        </a>
        <span>
          Documented with
          <a href="https://www.oddbird.net/herman/" class="footer-link">
            Herman
          </a>
        </span>
        <span>
          by
          <a href="https://www.oddbird.net/" class="footer-link">
            OddBird
          </a>
        </span>
      </aside>
    
  </nav>


      <main data-region="main">
        

        <div data-page="index">
          
  
  
    <ul class="project-links">
      
        <li class="project-link-item">
          <a href="https://www.oddbird.net/true/" class="project-link">View Project</a>
        </li>
      
      
        <li class="project-link-item">
          <a href="https://github.com/oddbird/true.git" class="project-link">View Source</a>
        </li>
      
    </ul>
  

  
    <div class="text-block">
      <h1 id="true" tabindex="-1">True</h1>
<p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/badge/License-BSD%203--Clause-blue.svg" alt="License"></a></p>
<ol>
<li>
<p>To make true; shape, adjust, place, etc., exactly or<span class="widont">&nbsp;</span>accurately:</p>
<p><em>True the wheels of a bicycle after striking a<span class="widont">&nbsp;</span>pothole.</em></p>
</li>
<li>
<p>To make even, symmetrical, level, etc. (often followed by <em>up</em>):</p>
<p><em>True up the sides of a<span class="widont">&nbsp;</span>door.</em></p>
</li>
<li>
<p>To test your Sass code; debug, perfect, etc. (often using <em>True</em>):</p>
<p><em>True your sweet plugin before you<span class="widont">&nbsp;</span>deploy.</em></p>
</li>
</ol>
<p>True is a unit-testing tool
for <a href="https://sass-lang.com/">Sass</a> code.
All of the tests are written in plain Sass,
and can be compiled using Dart Sass –
but we also provide integration with
JavaScript test runners
(e.g. <a href="https://mochajs.org/">Mocha</a> or <a href="https://jestjs.io/">Jest</a>),
for extra features and improved<span class="widont">&nbsp;</span>reporting.</p>
<h2 id="install" tabindex="-1">Install</h2>
<p>In command line:</p>
<pre><code class="lang-bash">npm install --save-dev sass-true
</code></pre>
<p>True requires Dart Sass v1.45.0 or higher, so install it if you haven’t<span class="widont">&nbsp;</span>already:</p>
<pre><code class="lang-bash">npm install --save-dev sass-embedded # or `sass`
</code></pre>
<p>Import in your test directory,
like any other Sass<span class="widont">&nbsp;</span>file:</p>
<pre><code class="lang-scss">@use 'pkg:sass-true' as *;
</code></pre>
<p>If you are not using the Sass <a href="https://sass-lang.com/documentation/js-api/classes/nodepackageimporter/">Node.js package importer</a>, you may
need to include the full path<span class="widont">&nbsp;</span>name:</p>
<pre><code class="lang-scss">// This is only an example, your path may be different
@use '../node_modules/sass-true' as *;
</code></pre>
<p>Or if you are using the <a href="#using-mocha-jest-or-other-js-test-runners">JavaScript test runner integration</a>:</p>
<pre><code class="lang-scss">@use 'true' as *;
</code></pre>
<h2 id="one-setting" tabindex="-1">One Setting</h2>
<p><code>$terminal-output</code> (boolean),
defaults to <code>true</code></p>
<ul>
<li><code>true</code> will show detailed information in the terminal
for debugging failed assertions or reporting final results.
This is the default, and best for compiling without a JavaScript test<span class="widont">&nbsp;</span>runner.</li>
<li><code>false</code> will turn off all terminal output from Sass,
though Mocha/Jest will continue to use the terminal for<span class="widont">&nbsp;</span>reporting.</li>
</ul>
<p>If you are still using <code>@import</code> rather than <code>@use</code>,
there is an import path available -
which retains the legacy prefixed <code>$true-terminal-output</code> variable name:</p>
<pre><code class="lang-scss">// Your path may be different
@import '../node_modules/sass-true/sass/true';
</code></pre>
<h2 id="usage" tabindex="-1">Usage</h2>
<p>True is based on common JS-testing patterns,
allowing both a <code>test-module</code>/<code>test</code> syntax,
and the newer <code>describe</code>/<code>it</code> for defining the<span class="widont">&nbsp;</span>structure:</p>
<pre><code class="lang-scss">@include test-module('Zip [function]') {
  @include test('Zips multiple lists into a single multi-dimensional list') {
    // Assert the expected results
    @include assert-equal(zip(a b c, 1 2 3), (a 1, b 2, c 3));
  }
}
</code></pre>
<p>This is the same<span class="widont">&nbsp;</span>as…</p>
<pre><code class="lang-scss">@include describe('Zip [function]') {
  @include it('Zips multiple lists into a single multi-dimensional list') {
    // Assert the expected results
    @include assert-equal(zip(a b c, 1 2 3), (a 1, b 2, c 3));
  }
}
</code></pre>
<p>Sass is able to compare values internally,
meaning function-output and variable values
can easily be compared and reported during Sass<span class="widont">&nbsp;</span>compilation.</p>
<p>CSS output tests, on the other hand,
have to be compared after compilation is complete.
You can do that by hand if you want
(<code>git diff</code> is helpful for noticing changes),
or you can use a test runner
such as <a href="https://mochajs.org/">Mocha</a> or <a href="https://jestjs.io/">Jest</a>.</p>
<p>Output tests fit the same structure,
but assertions take a slightly different form,
with an outer <code>assert</code> mixin,
and a matching pair of <code>output</code> and <code>expect</code>
to contain the<span class="widont">&nbsp;</span>output-values.</p>
<pre><code class="lang-scss">// Test CSS output from mixins
@include it('Outputs a font size and line height based on keyword') {
  @include assert {
    @include output {
      @include font-size('large');
    }

    @include expect {
      font-size: 2rem;
      line-height: 3rem;
    }
  }
}
</code></pre>
<p>You can optionally show a summary report
in CSS and/or the command line,
after the tests have<span class="widont">&nbsp;</span>completed:</p>
<pre><code class="lang-scss">@include report;
</code></pre>
<p>See the <a href="https://www.oddbird.net/true/docs/">full documentation online</a>
for more details.
See <a href="https://github.com/oddbird/true/blob/main/CHANGELOG.md">CHANGELOG.md</a>
when upgrading from an older version of<span class="widont">&nbsp;</span>True.</p>
<h2 id="using-mocha-jest-or-other-js-test-runners" tabindex="-1">Using Mocha, Jest, or other JS test<span class="widont">&nbsp;</span>runners</h2>
<ol>
<li>
<p>Install <code>true</code> via npm:</p>
<pre><code class="lang-bash">npm install --save-dev sass-true
</code></pre>
</li>
<li>
<p>[Optional] Install Dart Sass (<code>sass-embedded</code> or <code>sass</code>), if not already<span class="widont">&nbsp;</span>installed.</p>
<pre><code class="lang-bash">npm install --save-dev sass-embedded # or `sass`
</code></pre>
</li>
<li>
<p>Write some Sass tests in <code>test/test.scss</code> (see above).</p>
</li>
<li>
<p>Write a shim JS test file in <code>test/sass.test.js</code>:</p>
<pre><code class="lang-js">const path = require('node:path');
const sassTrue = require('sass-true');

const sassFile = path.join(__dirname, 'test.scss');
sassTrue.runSass({ describe, it }, sassFile);
</code></pre>
</li>
<li>
<p>Run Mocha/Jest, and see your Sass tests reported in the command<span class="widont">&nbsp;</span>line.</p>
</li>
</ol>
<p><strong>Note:</strong> Because of differences between Jest globals and Node globals, Dart
Sass often errors when trying to compile in a Jest environment (e.g.
<code>J.getInterceptor$ax(...).map$1$1 is not a function</code>). This can usually be fixed
by installing
<a href="https://github.com/kayahr/jest-environment-node-single-context">jest-environment-node-single-context</a>
and setting <code>testEnvironment: 'jest-environment-node-single-context'</code> in
<code>jest.config.js</code>. See <a href="https://github.com/sass/dart-sass/issues/1692">possible</a>
<a href="https://github.com/dart-lang/sdk/issues/47670">related</a>
<a href="https://github.com/facebook/jest/issues/2549">issues</a>.</p>
<p><strong>Note:</strong> Jest does not watch for changes in Sass files by default. To use
<code>jest --watch</code> with True, add “scss” to your
<a href="https://jestjs.io/docs/configuration#modulefileextensions-arraystring">moduleFileExtensions</a><span class="widont">&nbsp;</span>setting.</p>
<p>You can call <code>runSass</code> more than once, if you have multiple Sass test files you
want to run<span class="widont">&nbsp;</span>separately.</p>
<p>The first argument is an object with required <code>describe</code> and <code>it</code> options, and
optional <code>sass</code>, <code>contextLines</code> and <code>sourceType</code> options.</p>
<p>Any JS test runner with equivalents to Mocha’s or Jest’s <code>describe</code> and <code>it</code>
should be usable in the same way: just pass your test runner’s <code>describe</code> and
<code>it</code> equivalents in the first argument to <code>runSass</code>.</p>
<p>The <code>sass</code> option is an optional string name of a Dart Sass implementation
installed in the current environment (e.g. <code>'embedded-sass'</code> or <code>'sass'</code>), or a
Dart Sass implementation instance itself. If none is provided, True will attempt
to detect which implementation is available, starting with <code>sass-embedded</code>.</p>
<p>If True can’t parse the CSS output, it’ll give you some context lines of CSS as
part of the error message. This context will likely be helpful in understanding
the parse failure. By default it provides up to 10 lines of context; if you need
more, you can provide a numeric <code>contextLines</code> option: the maximum number of
context lines to<span class="widont">&nbsp;</span>provide.</p>
<p>The second argument is a string representing either the path to a source Sass
file (passed through to Sass’
<a href="https://sass-lang.com/documentation/js-api/modules#compile"><code>compile</code></a>
function), or a string of source Sass (passed through to Sass’
<a href="https://sass-lang.com/documentation/js-api/modules#compileString"><code>compileString</code></a>
function). By default it is expected to be a path, and <code>sass.compile</code> is used.
To pass in a source string (and use <code>sass.compileString</code>), add <code>sourceType: 'string'</code> to your options passed in as the first argument to <code>runSass</code>.</p>
<p>The third (optional) argument to <code>runSass</code> accepts the <a href="https://sass-lang.com/documentation/js-api/interfaces/Options">same
options</a> that
Sass’ <code>compile</code> or <code>compileString</code> expect (e.g. <code>importers</code>, <code>loadPaths</code>, or
<code>style</code>), and these are passed directly through to<span class="widont">&nbsp;</span>Sass.</p>
<p>By default, True makes two modifications to these options. First, True’s sass
path is added to the <code>loadPaths</code> option, so <code>@use 'true';</code> works in your Sass
test file. Second, if Dart Sass v1.71 or greater is installed, <code>importers</code> is
set to an array containing the <a href="https://sass-lang.com/documentation/js-api/classes/nodepackageimporter/">Node.js package importer</a>, which
supports <code>pkg:</code> imports to resolve <code>@use</code> and <code>@import</code> for external modules
installed via npm or Yarn. If <code>importers</code> is set (even as an empty array
<code>importers: []</code>), it will override this default<span class="widont">&nbsp;</span>importer.</p>
<p><strong>Note:</strong> True requires the
<a href="https://sass-lang.com/documentation/js-api/modules#OutputStyle">default Sass <code>'expanded'</code> output style</a>,
and will not work if <code>{ style: 'compressed' }</code> is used in the third argument to
<code>runSass</code>.</p>
<h3 id="custom-importers" tabindex="-1">Custom Importers</h3>
<p>If you use tilde notation (e.g. <code>@use '~accoutrement/sass/tools'</code>) or another
method for importing Sass files from <code>node_modules</code>, you’ll need to tell
<code>runSass</code> how to handle that. That will require writing a <a href="https://sass-lang.com/documentation/js-api/interfaces/FileImporter">custom
importer</a>
and passing it into the configuration for <code>runSass</code>:</p>
<pre><code class="lang-js">const path = require('node:path');
const { pathToFileURL } = require('node:url');
const sassTrue = require('sass-true');

const importers = [
  {
    findFileUrl(url) {
      if (!url.startsWith('~')) {
        return null;
      }
      return new URL(
        pathToFileURL(path.resolve('node_modules', url.substring(1))),
      );
    },
  },
];

const sassFile = path.join(__dirname, 'test.scss');
sassTrue.runSass({ describe, it }, sassFile, { importers });
</code></pre>
<hr>
<h3 id="sponsor-oddbird-s-oss-work" tabindex="-1">Sponsor OddBird’s OSS<span class="widont">&nbsp;</span>Work</h3>
<p>At OddBird, we love contributing to the languages &amp; tools developers rely on.
We’re currently working on polyfills for new Popover &amp; Anchor Positioning
functionality, as well as CSS specifications for functions, mixins, and
responsive typography. Help us keep this work sustainable and centered on your
needs as a developer! We display sponsor logos and avatars on our
<a href="https://www.oddbird.net/true/#open-source-sponsors">website</a>.</p>
<p><a href="https://opencollective.com/oddbird-open-source">Sponsor OddBird’s OSS<span class="widont">&nbsp;</span>Work</a></p>

    </div>
  

        </div>
      </main>
    </div>
  </div>

  <script type="text/javascript" src="assets/webpack/runtime.min.js"></script>
  <script type="text/javascript" src="assets/webpack/common.min.js"></script>
  <script type="text/javascript" src="assets/webpack/app.min.js"></script>
  
</body>
</html>
